<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <title>targeted population</title>
  </head>

  <body>
    <form id="targeted-population-form" action="/api/targeted_population" method="POST" target="_blank" class="m-4" enctype="application/json">
      <div class="mb-3">
        <select  name="database" class="form-select" aria-label="Default select example">
          <option selected>Select Database</option>
          <option value="gsheet">GSheet</option>
          <option value="mongodb">MongoDB</option>
          <option value="mysql">MySQL</option>
        </select>
      </div>

      <div class="mb-3">
        <select  name="database_name" class="form-select" aria-label="Default select example">
          <option vlaue="not_selected" selected>Select database</option>
          {% for database in databases %}
          <option value="{{database}}">{{database}}</option>
          {% endfor %}
        </select>
      </div>

      <div class="mb-3">
        <select  name="collection" class="form-select" aria-label="Default select example">
          <option vlaue="not_selected"  selected>Select collections</option>
          {% for collection in collections %}
          <option value="{{collection}}">{{collection}}</option>
          {% endfor %}
        </select>
      </div>


      <div class="mb-3">
        <label for="exampleInputPassword1" class="form-label"
          >Number of Stages</label
        >
        <input
          id="stage-num-input"
          name="n_stage"
          type="number"
          class="form-control"
          id="exampleInputPassword1"
        />
      </div>

      <div class="row">
        <div class="col">
          <input name="datatype" type="number" class="form-control" placeholder="datatype(d)" value ="5" readonly/>
        </div>

        <div class="col">
          <div class="mb-3">
            <select name="max_or_agv" class="form-select" aria-label="Default select example">
              <option value="maximum_point">Maximum Point</option>
              <option value="population_average">Population Average</option>
            </select>
          </div>
        </div>
        <div class="col">
          <input name="max_avg_val" type="number" class="form-control" placeholder="m/A"/>
        </div>

        <div class="col">
          <input name="error_percent" type="number" class="form-control" placeholder="error(%)" />
        </div>

        <div class="col">
          <input name="range" type="number" class="form-control" placeholder="range(r)"/>
        </div>

        <div class="col">
          <input name="start_point" type="text" class="form-control" placeholder="2021/01/25" />
        </div>

        <div class="col">
          <input name="end_point" type="text" class="form-control" placeholder="2021/01/08" />
        </div>

        <div class="col">
          <input
          name="a"        print("postdtata")
        datatype_list = request.form.getlist('datatype')
        max_or_agv_list=request.form.getlist('max_or_agv')
        max_avg_val_list=request.form.getlist('max_avg_val')
        error_percent_list=request.form.getlist('error_percent')
        range_list=request.form.getlist('range')
        start_point_list=request.form.getlist('start_point')
        end_point_list=request.form.getlist('end_point')
        a_list=request.form.getlist('a')
        S = int(request.form.get('n_stage'))
        print("errorrrrrrr",error_percent_list)

        #stage_input_list=get_stage_List(S,datatype_list,max_or_agv_list,max_avg_val_list,error_percent_list,range_list,start_point_list,end_point_list,a_list)
        #stage_input_list = list(stage_input_list)
        targeted_population = dowelltargetedpopulation('mongodb', S,datatype_list,max_or_agv_list,max_avg_val_list,error_percent_list,range_list,start_point_list,end_point_list,a_list)
        if isinstance(targeted_population, pandas.DataFrame):
            df_html = targeted_population.to_html()
            resp = make_response(render_template_string(df_html))
            return resp
        return targeted_populatio
            type="number"
            class="form-control"
            placeholder="number of units (a)"
          />
        </div>
      </div>

      <div class="row">
        <div class="col">
          <input name="datatype" type="number" class="form-control" placeholder="datatype(d)"/>
        </div>

        <div class="col">
          <div class="mb-3">
            <select name="max_or_agv" class="form-select" aria-label="Default select example">
              <option value="maximum_point">Maximum Point</option>
              <option value="population_average">Population Average</option>
            </select>
          </div>
        </div>
        <div class="col">
          <input name="max_avg_val" type="number" class="form-control" placeholder="m/A" />
        </div>
        <div class="col">
          <input name="error_percent" type="number" class="form-control" placeholder="error(%)" />
        </div>


        <div class="col">
          <input name="range" type="number" class="form-control" placeholder="range(r)" />
        </div>


        <div class="col">
          <input name="start_point" type="text" class="form-control" placeholder="start point" />
        </div>

        <div class="col">
          <input name="end_point" type="text" class="form-control" placeholder="end poin" />
        </div>

        <div class="col">
          <input
          name="a"
            type="number"
            class="form-control"
            placeholder="number of units (a)"
          />
        </div>
      </div>



      <div class="row">
        <div class="col">
          <input name="datatype" type="number" class="form-control" placeholder="datatype(d)" />
        </div>

        <div class="col">
          <div class="mb-3">
            <select name="max_or_agv" class="form-select" aria-label="Default select example">
              <option value="maximum_point">Maximum Point</option>
              <option value="population_average">Population Average</option>
            </select>
          </div>
        </div>
        <div class="col">
          <input name="max_avg_val" type="number" class="form-control" placeholder="m/A" />
        </div>
        <div class="col">
          <input name="error_percent" type="number" class="form-control" placeholder="error(%)" />
        </div>


        <div class="col">
          <input name="range" type="number" class="form-control" placeholder="range(r)" />
        </div>

        <div class="col">
          <input name="start_point" type="text" class="form-control" placeholder="start point" />
        </div>

        <div class="col">
          <input name="end_point" type="text" class="form-control" placeholder="end poin" />
        </div>

        <div class="col">
          <input
          name="a"
            type="number"
            class="form-control"
            placeholder="number of units (a)"
          />
        </div>
      </div>


      <div class="row">
        <div class="col">
          <input name="datatype" type="number" class="form-control" placeholder="datatype(d)" />
        </div>

        <div class="col">
          <div class="mb-3">
            <select name="max_or_agv" class="form-select" aria-label="Default select example">
              <option value="maximum_point">Maximum Point</option>
              <option value="population_average">Population Average</option>
            </select>
          </div>
        </div>
        <div class="col">
          <input name="max_avg_val" type="number" class="form-control" placeholder="m/A" />
        </div>

        <div class="col">
          <input name="error_percent" type="number" class="form-control" placeholder="error(%)" />
        </div>

        <div class="col">
          <input name="range" type="number" class="form-control" placeholder="range(r)" />
        </div>

        <div class="col">
          <input name="start_point" type="text" class="form-control" placeholder="start point" />
        </div>

        <div class="col">
          <input name="end_point" type="text" class="form-control" placeholder="end poin" />
        </div>

        <div class="col">
          <input
          name="a"
            type="number"
            class="form-control"
            placeholder="number of units (a)"
          />
        </div>
      </div>

      <div class="row">
        <div class="col">
          <input name="datatype" type="number" class="form-control" placeholder="datatype(d)" />
        </div>

        <div class="col">
          <div class="mb-3">
            <select name="max_or_agv" class="form-select" aria-label="Default select example">
              <option value="maximum_point">Maximum Point</option>
              <option value="population_average">Population Average</option>
            </select>
          </div>
        </div>
        <div class="col">
          <input name="max_avg_val" type="number" class="form-control" placeholder="m/A" />
        </div>
        <div class="col">
          <input name="error_percent" type="number" class="form-control" placeholder="error(%)" />
        </div>


        <div class="col">
          <input name="range" type="number" class="form-control" placeholder="range(r)" />
        </div>

        <div class="col">
          <input name="start_point" type="text" class="form-control" placeholder="start point" />
        </div>

        <div class="col">
          <input name="end_point" type="text" class="form-control" placeholder="end poin" />
        </div>

        <div class="col">
          <input
          name="a"
            type="number"
            class="form-control"
            placeholder="number of units (a)"
          />
        </div>
      </div>


      <div class="row">lot inputs</div>
            <div class="row">
              <div class="col">
                <input name="datatype" type="number" class="form-control" placeholder="datatype(d)" value="7" disabled/>
              </div>

              <div class="col">
                <div class="mb-3">
                  <select name="p_r_selection" class="form-select" aria-label="Default select example">
                    <option value="proportion">Proportion</option>
                    <option value="random_generation">random generation</option>
                  </select>
                </div>
              </div>
              <div class="col">
                <input name="proportion" type="number" class="form-control" placeholder="proportion" />
              </div>
              <div class="col">
                <input name="first_position" type="number" class="form-control" placeholder="first position" />
              </div>


              <div class="col">
                <input name="last_position" type="number" class="form-control" placeholder="last position"/>
              </div>
            </div>

          <div class="row">
            <label>Sampling rule</label>
            <div class="col">
              <input name="number_of_variable" type="number" class="form-control" placeholder="number of variable(h)"/>
            </div>
          </div>





      <button type="submit" class="btn btn-primary">Submit</button>
    </form>


    <script
      src="https://code.jquery.com/jquery-3.6.0.js"
      integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
      crossorigin="anonymous"
    ></script>

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>

    <script
      type="text/javascript"
      src="{{ url_for('static', filename = 'index.js') }}"
    ></script>
  </body>
</html>
